# 国际化

Name-UI 支持国际化（i18n），让你的应用能够适应不同的语言和地区。

::: warning 开发中
国际化功能目前正在开发中，将在 v1.1.0 版本中发布。本文档描述了计划中的 API 设计。
:::

## 基础概念

### 支持的语言

Name-UI 计划支持以下语言：

- 🇨🇳 简体中文 (zh-CN) - 默认
- 🇺🇸 英语 (en-US)
- 🇯🇵 日语 (ja-JP)
- 🇰🇷 韩语 (ko-KR)
- 🇩🇪 德语 (de-DE)
- 🇫🇷 法语 (fr-FR)
- 🇪🇸 西班牙语 (es-ES)

### 文本类型

国际化覆盖以下类型的文本：

- **组件文本**: 按钮默认文字、占位符文本等
- **日期时间**: 日期格式、星期、月份名称等
- **数字格式**: 千分位分隔符、小数点等
- **验证消息**: 表单验证错误提示

## 使用方式

### Vue 配置

```javascript
// main.js
import { createApp } from 'vue'
import NameUI from '@name-ui/vue'
import { zhCN, enUS } from '@name-ui/locale'

const app = createApp(App)

// 配置默认语言
app.use(NameUI, {
  locale: zhCN, // 或 enUS
})

app.mount('#app')
```

### React 配置

```tsx
// App.tsx
import React from 'react'
import { ConfigProvider } from '@name-ui/react'
import { zhCN, enUS } from '@name-ui/locale'

function App() {
  return (
    <ConfigProvider locale={zhCN}>
      <YourApp />
    </ConfigProvider>
  )
}
```

### 动态切换语言

**Vue 示例:**

```vue
<template>
  <div>
    <select v-model="currentLocale" @change="changeLocale">
      <option value="zh-CN">简体中文</option>
      <option value="en-US">English</option>
      <option value="ja-JP">日本語</option>
    </select>

    <n-date-picker v-model="date" />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useLocale } from '@name-ui/vue'
import { zhCN, enUS, jaJP } from '@name-ui/locale'

const currentLocale = ref('zh-CN')
const { setLocale } = useLocale()

const locales = {
  'zh-CN': zhCN,
  'en-US': enUS,
  'ja-JP': jaJP,
}

const changeLocale = () => {
  setLocale(locales[currentLocale.value])
}
</script>
```

**React 示例:**

```tsx
import React, { useState } from 'react'
import { ConfigProvider, DatePicker } from '@name-ui/react'
import { zhCN, enUS, jaJP } from '@name-ui/locale'

const locales = {
  'zh-CN': zhCN,
  'en-US': enUS,
  'ja-JP': jaJP,
}

export default function App() {
  const [currentLocale, setCurrentLocale] = useState('zh-CN')

  return (
    <ConfigProvider locale={locales[currentLocale]}>
      <select
        value={currentLocale}
        onChange={e => setCurrentLocale(e.target.value)}
      >
        <option value='zh-CN'>简体中文</option>
        <option value='en-US'>English</option>
        <option value='ja-JP'>日本語</option>
      </select>

      <DatePicker />
    </ConfigProvider>
  )
}
```

## 语言包结构

### 内置语言包

```javascript
// @name-ui/locale/zh-CN.js
export default {
  name: 'zh-CN',
  common: {
    confirm: '确认',
    cancel: '取消',
    clear: '清除',
    loading: '加载中...',
    noData: '暂无数据',
    placeholder: '请选择',
    searchPlaceholder: '请输入搜索内容',
  },
  button: {
    confirm: '确认',
    cancel: '取消',
    submit: '提交',
    reset: '重置',
    save: '保存',
    edit: '编辑',
    delete: '删除',
    add: '添加',
    search: '搜索',
  },
  input: {
    placeholder: '请输入',
    clear: '清除',
  },
  select: {
    placeholder: '请选择',
    noData: '无数据',
    loading: '加载中...',
  },
  datePicker: {
    placeholder: '请选择日期',
    rangePlaceholder: ['开始日期', '结束日期'],
    today: '今天',
    now: '此刻',
    clear: '清除',
    month: '月',
    year: '年',
    previousYear: '上一年',
    nextYear: '下一年',
    previousMonth: '上个月',
    nextMonth: '下个月',
    months: {
      1: '1月',
      2: '2月',
      3: '3月',
      4: '4月',
      5: '5月',
      6: '6月',
      7: '7月',
      8: '8月',
      9: '9月',
      10: '10月',
      11: '11月',
      12: '12月',
    },
    weeks: {
      sun: '日',
      mon: '一',
      tue: '二',
      wed: '三',
      thu: '四',
      fri: '五',
      sat: '六',
    },
  },
  table: {
    noData: '暂无数据',
    loading: '数据加载中...',
    total: '共 {total} 条',
    page: '第 {current}/{total} 页',
  },
  pagination: {
    previous: '上一页',
    next: '下一页',
    total: '共 {total} 条',
    goto: '跳至',
    page: '页',
    itemsPerPage: '条/页',
  },
  upload: {
    dragText: '点击或拖拽文件到此区域上传',
    hint: '支持单个或批量上传',
    uploading: '上传中...',
    removeFile: '删除文件',
    uploadError: '上传失败',
    previewFile: '预览文件',
    downloadFile: '下载文件',
  },
  form: {
    required: '此项为必填项',
    types: {
      email: '请输入正确的邮箱地址',
      url: '请输入正确的网址',
      number: '请输入数字',
      integer: '请输入整数',
      float: '请输入浮点数',
      regex: '格式不正确',
      method: '验证方法不正确',
    },
    string: {
      min: '至少输入 {min} 个字符',
      max: '最多输入 {max} 个字符',
      range: '请输入 {min}-{max} 个字符',
    },
    number: {
      min: '数值不能小于 {min}',
      max: '数值不能大于 {max}',
      range: '数值必须在 {min}-{max} 之间',
    },
  },
}
```

### 英文语言包

```javascript
// @name-ui/locale/en-US.js
export default {
  name: 'en-US',
  common: {
    confirm: 'Confirm',
    cancel: 'Cancel',
    clear: 'Clear',
    loading: 'Loading...',
    noData: 'No data',
    placeholder: 'Please select',
    searchPlaceholder: 'Search...',
  },
  button: {
    confirm: 'Confirm',
    cancel: 'Cancel',
    submit: 'Submit',
    reset: 'Reset',
    save: 'Save',
    edit: 'Edit',
    delete: 'Delete',
    add: 'Add',
    search: 'Search',
  },
  input: {
    placeholder: 'Please input',
    clear: 'Clear',
  },
  // ... 其他翻译
}
```

## 自定义语言包

### 创建自定义语言包

```javascript
// locales/my-locale.js
export default {
  name: 'my-locale',
  common: {
    confirm: 'My Confirm',
    cancel: 'My Cancel',
    // ... 其他翻译
  },
  // 继承默认语言包的其他部分
  ...zhCN,
  // 覆盖需要自定义的部分
  button: {
    ...zhCN.button,
    confirm: 'My Custom Confirm',
  },
}
```

### 使用自定义语言包

```javascript
// main.js
import myLocale from './locales/my-locale.js'

app.use(NameUI, {
  locale: myLocale,
})
```

## 高级功能

### 局部配置

为特定组件配置不同的语言：

**Vue 示例:**

```vue
<template>
  <div>
    <!-- 全局使用中文 -->
    <n-button>默认按钮</n-button>

    <!-- 局部使用英文 -->
    <n-config-provider :locale="enUS">
      <n-button>English Button</n-button>
      <n-date-picker />
    </n-config-provider>
  </div>
</template>
```

**React 示例:**

```tsx
<div>
  {/* 全局使用中文 */}
  <Button>默认按钮</Button>

  {/* 局部使用英文 */}
  <ConfigProvider locale={enUS}>
    <Button>English Button</Button>
    <DatePicker />
  </ConfigProvider>
</div>
```

### 动态加载语言包

```javascript
// 动态导入语言包
const loadLocale = async locale => {
  const localeModule = await import(`@name-ui/locale/${locale}`)
  return localeModule.default
}

// 使用示例
const changeLanguage = async locale => {
  const localeData = await loadLocale(locale)
  setLocale(localeData)
}
```

### RTL 支持

对于阿拉伯语、希伯来语等从右到左的语言：

```javascript
// 启用 RTL 支持
import { arEG } from '@name-ui/locale'

app.use(NameUI, {
  locale: arEG,
  rtl: true,
})
```

```css
/* RTL 样式适配 */
[dir='rtl'] .n-button {
  /* RTL 特定样式 */
}
```

### 日期和时间格式化

```javascript
// 自定义日期格式
const customLocale = {
  ...zhCN,
  datePicker: {
    ...zhCN.datePicker,
    format: 'YYYY年MM月DD日',
    timeFormat: 'HH:mm:ss',
  },
}
```

## 最佳实践

### 1. 组织翻译文件

```
locales/
├── zh-CN/
│   ├── common.js
│   ├── components.js
│   └── index.js
├── en-US/
│   ├── common.js
│   ├── components.js
│   └── index.js
└── index.js
```

### 2. 翻译键命名规范

```javascript
// ✅ 推荐：清晰的层级结构
{
  form: {
    validation: {
      required: '此项为必填',
      email: '邮箱格式不正确'
    }
  }
}

// ❌ 不推荐：扁平结构
{
  formValidationRequired: '此项为必填',
  formValidationEmail: '邮箱格式不正确'
}
```

### 3. 变量插值

支持在翻译文本中使用变量：

```javascript
// 语言包
{
  pagination: {
    total: '共 {total} 条记录，第 {current} 页'
  }
}

// 使用
const text = t('pagination.total', { total: 100, current: 1 })
// 结果：共 100 条记录，第 1 页
```

### 4. 复数形式处理

```javascript
// 英文复数规则
{
  item: {
    zero: 'no items',
    one: '1 item',
    other: '{count} items'
  }
}

// 中文无复数变化
{
  item: '{count} 个项目'
}
```

## 工具和插件

### VS Code 插件

推荐使用 i18n Ally 插件来管理翻译：

1. 安装 i18n Ally 插件
2. 配置 `.vscode/settings.json`：

```json
{
  "i18n-ally.localesPaths": ["src/locales"],
  "i18n-ally.keystyle": "nested",
  "i18n-ally.enabledFrameworks": ["vue", "react"]
}
```

### 翻译管理

```javascript
// 翻译工具函数
export const useTranslation = () => {
  const { locale } = useLocale()

  const t = (key, params = {}) => {
    const keys = key.split('.')
    let value = locale.value

    for (const k of keys) {
      value = value?.[k]
    }

    if (!value) return key

    // 变量替换
    return Object.keys(params).reduce((text, param) => {
      return text.replace(new RegExp(`{${param}}`, 'g'), params[param])
    }, value)
  }

  return { t }
}
```

通过这套完整的国际化系统，Name-UI 将能够支持全球化的应用开发需求。
